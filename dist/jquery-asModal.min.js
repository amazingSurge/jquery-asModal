/**
* jQuery asModal v0.3.1
* https://github.com/amazingSurge/jquery-asModal
*
* Copyright (c) amazingSurge
* Released under the LGPL-3.0 license
*/
!function(t,e){if("function"==typeof define&&define.amd)define(["jquery"],e);else if("undefined"!=typeof exports)e(require("jquery"));else{var n={exports:{}};e(t.jQuery),t.jqueryAsModalEs=n.exports}}(this,function(t){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=e(t),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){var t=document.createElement("fakeelement"),e={transition:"transitionend",WebkitTransition:"webkitTransitionEnd"},n=!1,i=void 0;for(var s in e)e.hasOwnProperty(s)&&void 0!==t.style[s]&&(i=e[s]);return i&&(n=!0),{css3Support:n,animationEnd:i}}(),l={namespace:"modal",skin:null,content:null,overlay:!0,closeElement:null,effect:"fadeScale",overlaySpeed:200,effectFallback:"fade",focus:!0,errorContent:"sorry, ajax error.",loadingContent:"loading...",closeByEscape:!0,closeByOverlayClick:!0,width:null,hieght:null,onOpen:null,onClose:null},r={fade:{moveIn:function(t,e){t.$content.animate({opacity:1},{duration:400,complete:function(){e.resolve()}})},moveOut:function(t,e){t.$content.animate({opacity:0},{duration:400,complete:function(){e.resolve()}})}}},c="asModal",d=function(){function t(e,s){n(this,t),this.element=e,this.$element=(0,i.default)(e),this.$container=(0,i.default)("<div></div>"),this.$contentWrap=(0,i.default)("<div></div>").appendTo(this.$container),this.$content=(0,i.default)("<div></div>").appendTo(this.$contentWrap);var o=[];i.default.each(this.$element.data(),function(t,e){var n=new RegExp("^modal","i");n.test(t)&&(o[t.toLowerCase().replace(n,"")]=e)}),this.options=i.default.extend(!0,{},l,s,o),this.namespace=this.options.namespace,a.css3Support||(this.options.effect=this.options.effectFallback),this.classes={overlay:this.namespace+"-overlay",container:this.namespace+"-container",content:this.namespace+"-content",contentWrap:this.namespace+"-contentWrap",skin:this.namespace+"_"+this.options.skin,error:this.namespace+"_error",open:this.namespace+"_open",animateActive:this.namespace+"_animateActive",effect:this.namespace+"_"+this.options.effect,overlayEffect:this.namespace+"_ovrelay_"+this.options.effect,loading:this.namespace+"_loading",disabled:this.namespace+"_disabled"},this.options.skin&&(this.$element.addClass(this.classes.skin),this.$container.addClass(this.classes.skin)),this.$container.addClass(this.classes.container),this.$contentWrap.addClass(this.classes.contentWrap),this.$content.addClass(this.classes.content),this.options.overlay&&(this.$overlay=(0,i.default)("<div></div>"),this.$overlay.addClass(this.classes.overlay),this.options.skin&&this.$overlay.addClass(this.classes.skin)),this.isLoading=!1,this.disabled=!1,this.isError=!1,this.isOpen=!1,this._init()}return o(t,[{key:"_init",value:function(){null===this.options.content&&(this.options.content=this.$element.attr("href")),this.$contentWrap.addClass(this.classes.effect),this.$overlay.addClass(this.classes.overlayEffect),this.$container.appendTo("body"),this.$overlay.appendTo("body"),this.options.width&&this.$content.width(this.options.width),this.options.height&&this.$content.height(this.options.height),this._bindEvents(),this._trigger("ready")}},{key:"_bindEvents",value:function(){var t=this;this.options.closeElement&&this.$contentWrap.on("click.modal",this.options.closeElement,i.default.proxy(this.hide,this)),this.$element.on("click.modal",function(){return t.disabled||t.open(),!1}),this.options.closeByOverlayClick&&this.$container.on("click.modal",function(e){if((0,i.default)(e.target).hasClass(t.classes.container))return t.close(),!1})}},{key:"_load",value:function(){var t=this,e=i.default.Deferred();return"#"===this.options.content.charAt(0)||"."===this.options.content.charAt(0)?e.resolve((0,i.default)(this.options.content)):(this._showLoading(),i.default.ajax({type:"get",cache:!0,url:this.options.content}).then(function(t){e.resolve((0,i.default)(t))},function(){e.reject(t.options.errorContent)})),e.promise()}},{key:"_unbindeEvent",value:function(){(0,i.default)(document).off("keydown.modal")}},{key:"_showLoading",value:function(){this.$loading=(0,i.default)("<div></div>").html(this.options.loadingContent).addClass(this.classes.loading),this.$loading.appendTo(this.$overlay)}},{key:"_hideLoading",value:function(){this.$loading&&(this.$loading.remove(),this.$loading=null)}},{key:"_animate",value:function(){var t=i.default.Deferred();return a.css3Support?t.reject():r[this.options.effectFallback][this.status](this,t),t.promise()}},{key:"open",value:function(){var t=this;return this.isLoading&&this._hideLoading(),this.options.overlay&&(this.$overlay.addClass(this.classes.open),this.$overlay.animate({opacity:1},{duration:this.options.overlaySpeed})),this.options.closeByEscape&&(0,i.default)(document).on("keydown.modal",function(e){27===e.keyCode&&t.close()}),this.content&&!this.isError?void this._afterOpen():(this.$content.removeClass(this.classes.error),void this._load().always(function(){t._hideLoading()}).then(function(e){t.content=e,t.$content.empty().html(t.content),t._afterOpen()},function(e){t.$content.addClass(t.classes.error),t.isError=!0,t.content=e,t.$content.empty().html(t.content),t._afterOpen()}))}},{key:"_afterOpen",value:function(){var t=this;this.options.focus&&setTimeout(function(){var e=i.default.isFunction(t.content.find)&&t.content.find("input");e.length>0&&e.get(0).focus()},10),this.$container.addClass(this.classes.open),setTimeout(function(){t.$contentWrap.addClass(t.classes.animateActive)},0),this.status="moveIn",this._animate().then(function(){t.isOpen=!0,t.$content.trigger(t.animationEnd,t)})}},{key:"close",value:function(){var t=this;this.status="moveOut",this.$content.on(a.animationEnd,function(){return t._afterClose(),t.$content.off(t.animationEnd),"function"==typeof t.options.onComplete&&t.options.onComplete.call(this,this),t.$container.trigger("modal::complete",this),!1}),this.$overlay.animate({opacity:0},{duration:this.options.overlaySpeed,complete:function(){t.$overlay.removeClass(t.classes.open)}}),this.$contentWrap.removeClass(this.classes.animateActive),this._animate().then(function(){t._afterClose()})}},{key:"_afterClose",value:function(){this._unbindeEvent(),this.$container.removeClass(this.classes.open),this.isOpen=!1}},{key:"enable",value:function(){this.disabled=!1,this.$element.addClass(this.classes.disabled),this._trigger("enable")}},{key:"disable",value:function(){this.disabled=!0,this.$element.removeClass(this.classes.disabled),this._trigger("disable")}},{key:"destroy",value:function(){this.$element.off("click.modal"),this.$container.remove(),this.$overlay.remove(),this._trigger("destroy")}},{key:"_trigger",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var s=[this].concat(n);this.$element.trigger(c+"::"+t,s),t=t.replace(/\b\w+\b/g,function(t){return t.substring(0,1).toUpperCase()+t.substring(1)});var o="on"+t;"function"==typeof this.options[o]&&this.options[o].apply(this,n)}}],[{key:"setDefaults",value:function(t){i.default.extend(l,i.default.isPlainObject(t)&&t)}}]),t}(),h={version:"0.3.1"},u="asModal",f=i.default.fn.asModal,p=function(t){for(var e=this,n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];if("string"==typeof t){var l=function(){var n=t;if(/^_/.test(n))return{v:!1};if(!/^(get)/.test(n))return{v:e.each(function(){var t=i.default.data(this,u);t&&"function"==typeof t[n]&&t[n].apply(t,o)})};var s=e.first().data(u);return s&&"function"==typeof s[n]?{v:s[n].apply(s,o)}:void 0}();if("object"===("undefined"==typeof l?"undefined":s(l)))return l.v}return this.each(function(){(0,i.default)(this).data(u)||(0,i.default)(this).data(u,new d(this,t))})};i.default.fn.asModal=p,i.default.asModal=i.default.extend({setDefaults:d.setDefaults,noConflict:function(){return i.default.fn.asModal=f,p}},h)});