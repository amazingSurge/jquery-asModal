/*! jQuery Modal - v0.1.0 - 2013-05-09
* https://github.com/amazingSurge/jquery-modal
* Copyright (c) 2013 amazingSurge; Licensed MIT */
(function(o,e,n,t){"use strict";var l=n.Modal=function(t,s){this.element=t,this.$element=n(t);var i=[];n.each(this.$element.data(),function(o,e){var n=RegExp("^modal","i");n.test(o)&&(i[o.toLowerCase().replace(n,"")]=e)}),this.options=n.extend(!0,{},l.defaults,s,i);var a=this.options.namespace;this.$element.addClass(a+"-container");var c=this;n.extend(c,{init:function(){c.options.overlay&&this.overlay.setup(),c.options.close&&this.close.setup(),c.$element.on("modal:open",function(){return n.isFunction(c.options.onOpen)&&c.options.onOpen.call(c),c.$element.removeClass(a+"-hide").addClass(a+"-show"),n(e).on("keydown.modal",function(o){c.options.closeByEscape&&27===o.keyCode&&(o.preventDefault(),c.close())}),n(o).on("resize.modal orientationchange.modal",function(){c.position()}),n.isFunction(c.options.onShow)&&c.options.onShow.call(c),!1}),c.$element.on("modal:close",function(){return n.isFunction(c.options.onClose)&&c.options.onClose.call(c),n(e).off(".modal"),n(o).off(".modal"),c.$element.removeClass(a+"-show").addClass(a+"-hide"),!1})},overlay:{setup:function(){c.$overlay=n('<div class="'+a+'-overlay"></div>').appendTo("body"),c.$element.on("modal:open",function(){c.overlay.show(),c.options.closeByOverlayClick&&c.$overlay.on("click.modal",function(){c.close()})}),c.$element.on("modal:close",function(){c.overlay.hide(),c.options.closeByOverlayClick&&c.$overlay.off("click.modal")})},show:function(){c.$overlay.removeClass(a+"-hide").addClass(a+"-show")},hide:function(){c.$overlay.removeClass(a+"-show").addClass(a+"-hide")}},close:{setup:function(){c.$close=c.$element.find(c.options.close),c.$close.on("click",function(){return c.$element.trigger("modal:close"),!1})}},getDimensions:function(){}}),c.init()};l.defaults={namespace:"modal",overlay:!0,close:!1,focus:!0,closeByEscape:!0,closeByOverlayClick:!0,autoPosition:!0,onOpen:null,onShow:null,onClose:null},l.prototype={constructor:l,open:function(){this.$element.trigger("modal:open")},close:function(){this.$element.trigger("modal:close")},position:function(){}},n.fn.modal=function(o){if("string"==typeof o){var e=o,s=arguments.length>1?Array.prototype.slice.call(arguments,1):t;return this.each(function(){var o=n.data(this,"modal");"function"==typeof o[e]&&o[e].apply(o,s)})}return this.each(function(){n.data(this,"modal")||n.data(this,"modal",new l(this,o))})}})(window,document,jQuery);